<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.mapper.IAdminDao">
    <resultMap id="adminResultMap" type="com.Pojo.AdminPojo">
        <id property="id" column="id"/>
        <result property="name" column="name"/>
        <result property="sex" column="sex"/>
        <result property="age" column="age"/>
        <result property="address" column="address"/>
    </resultMap>
    <select id="findAllAdmin" resultMap="adminResultMap">
        select * from admin
    </select>
<!--    主键递增，利用uuid生成自增主键，防止id重名-->
    <insert id="addAdmin">
        <selectKey keyProperty="id" keyColumn="id" resultType="java.lang.String" order="BEFORE">
            select replace(uuid(),'-','')
        </selectKey>
        insert into admin values(#{id},#{name},#{sex},#{age},#{address})
    </insert>
    <delete id="deleteAdmin">
         delete from admin where id=#{id}
    </delete>
<!--    <select id="findByCondition" resultMap="adminResultMap">-->
<!--        select * from admin-->
<!--        <where>-->
<!--            <if test="id!=null and id.length()!=0">id=#{id}</if>-->
<!--            <if test="name!=null and name.length()!=0">and name=#{name}</if>-->
<!--                <where>-->
<!--                    <if test="name.length() &lt;=3">name like concat('%',#{name},'%')</if>-->
<!--                    <if test="name.length() &gt;3">name=#{name}</if>-->
<!--                </where>-->
<!--            <if test="sex!=null and sex.length!=0">and sex=#{sex}</if>-->
<!--            <if test="age!=nul and age.length()!=0">and age=#{age}</if>-->
<!--            <if test="address!=0 and address.length()!=0">and-->
<!--                <where>-->
<!--                    <if test="address.length &lt;=4">address like concat('%',#{address},'%')</if>-->
<!--                    <if test="address.length &gt;4">address=#{address}</if>-->
<!--                </where>-->
<!--            </if>-->
<!--        </where>-->
<!--    </select>-->
<!--    <update id="updateAdmin">-->
<!--    </update>-->
    <select id="findById" resultMap="adminResultMap">
        select * from admin where id=#{id}
    </select>
    <update id="updateAdmin">
        update admin
            <trim prefix="set" suffixOverrides=",">
                <if test="name!=null and name.length()!=0">name=#{name},</if>
                <if test="sex!=null">sex=#{sex},</if>
                <if test="age!=null">age=#{age},</if>
                <if test="address!=null and address.length()!=0">address=#{address},</if>
            </trim>
            where id=#{id}
    </update>
</mapper>